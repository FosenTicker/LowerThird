<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <link rel="stylesheet" type="text/css" href="styles.css">
</head>

<body>
  <div id="ticker" class="ticker">
    <p id="ticker-text"></p>
  </div>
  <pre id="code" class="code"></pre>

  <script>
    // Set the date we're counting from
    var countDate = new Date("Oct 11, 2021 00:00:00").getTime();

    // Daily income in NOK
    var dailyIncome = 2500000;

    // Income per second (daily income divided by number of seconds in a day)
    var incomePerSecond = dailyIncome / (24 * 60 * 60);

    var languages = [
      { language: 'no-NO', text: 'Det har g√•tt <span class="highlight">{days}</span> dager siden 11.10.2021. Akkumulert inntekt er <span class="highlight">{income}</span> NOK.' },
      { language: 'en-US', text: 'It has been <span class="highlight">{days}</span> days since 11.10.2021. Accumulated income is <span class="highlight">{income}</span> NOK.' },
      { language: 'de-DE', text: 'Es sind <span class="highlight">{days}</span> Tage seit dem 11.10.2021 vergangen. Akkumulierte Einnahmen betragen <span class="highlight">{income}</span> NOK.' },
    ];
    var currentLanguageIndex = 0;

    // Update the count down every 1 second
    var ticker = setInterval(function () {

      // Get today's date and time
      var now = new Date().getTime();

      // Find the distance between now and the count date
      var distance = now - countDate;

      // Time calculations for days and seconds
      var days = Math.floor(distance / (1000 * 60 * 60 * 24));
      var seconds = Math.floor(distance / 1000);

      // Calculate accumulated income
      var income = Math.floor(seconds * incomePerSecond);

      // Get the current language and text
      var currentLanguage = languages[currentLanguageIndex].language;
      var currentText = languages[currentLanguageIndex].text;

      // Replace placeholders in the text
      currentText = currentText.replace('{days}', days).replace('{income}', income.toLocaleString(currentLanguage));

      // Display the result in the element with id="ticker-text"
      document.getElementById("ticker-text").innerHTML = currentText;

      // Update the current language index, wrapping back to 0 if necessary
      currentLanguageIndex = (currentLanguageIndex + 1) % languages.length;

      // If the count down is finished, write some text 
      if (distance < 0) {
        clearInterval(ticker);
        document.getElementById("ticker-text").innerHTML = "Feil i dato.";
      }
    }, 1000);

    // Display the script for copying
    document.getElementById("code").textContent = document.querySelector('script').textContent;
  </script>
</body>

</html>